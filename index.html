<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=">


  <link rel="mask-icon" href="/images/logo.svg?v=" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="blogs">
<meta name="keywords" content="个人站，前沿技术分享总结">
<meta property="og:type" content="website">
<meta property="og:title" content="Blog Of tuwei">
<meta property="og:url" content="tuweiwei.github.io/index.html">
<meta property="og:site_name" content="Blog Of tuwei">
<meta property="og:description" content="blogs">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Blog Of tuwei">
<meta name="twitter:description" content="blogs">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="tuweiwei.github.io/"/>





  <title>Blog Of tuwei</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Blog Of tuwei</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Stay Hungry, Stay Foolish</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/11/01/with 语法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/with 语法/" itemprop="url">sql高级语法-WITH</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-01T22:50:21+08:00">
                2018-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="with-语法"><a href="#with-语法" class="headerlink" title="with 语法"></a><strong>with 语法</strong></h1><p>用来实现递归查询，比如当要查询部门时，查询当前部门及下属部门就要采用递归的查询</p>
<table>
<thead>
<tr>
<th style="text-align:center">Id</th>
<th style="text-align:center">Pid</th>
<th style="text-align:center">DeptName </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">总部</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
<td style="text-align:center">研发部</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">1</td>
<td style="text-align:center">测试部</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">1</td>
<td style="text-align:center">质量部</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">2</td>
<td style="text-align:center">小组1</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">2</td>
<td style="text-align:center">小组2</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">3</td>
<td style="text-align:center">测试1</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">3</td>
<td style="text-align:center">测试2</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">5</td>
<td style="text-align:center">前端组</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">5</td>
<td style="text-align:center">美工</td>
</tr>
</tbody>
</table>
<p>要实现的效果：</p>
<table>
<thead>
<tr>
<th style="text-align:center">Id</th>
<th style="text-align:center">Pid</th>
<th style="text-align:center">DeptName</th>
<th style="text-align:center">lvl</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
<td style="text-align:center">研发部</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">2</td>
<td style="text-align:center">小组1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">2</td>
<td style="text-align:center">小组2</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">5</td>
<td style="text-align:center">前端组</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">5</td>
<td style="text-align:center">美工</td>
<td style="text-align:center">2</td>
</tr>
</tbody>
</table>
<p>查询sql:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">with cte as</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">Id</span>,Pid,DeptName,<span class="number">0</span> <span class="keyword">as</span> lvl <span class="keyword">from</span> Department</span><br><span class="line">    <span class="keyword">where</span> <span class="keyword">Id</span> = <span class="number">2</span></span><br><span class="line">    <span class="keyword">union</span> all</span><br><span class="line">    <span class="keyword">select</span> d.Id,d.Pid,d.DeptName,lvl+<span class="number">1</span> <span class="keyword">from</span> cte c <span class="keyword">inner</span> <span class="keyword">join</span>   Department d</span><br><span class="line">    <span class="keyword">on</span> c.Id = d.Pid</span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> cte</span><br></pre></td></tr></table></figure>
<p>执行过程：<br>    递归CTE最少包含两个查询(也被称为成员)。第一个查询为定点成员，定点成员只是一个返回有效表的查询，用于递归的基础或定位点。第二个查询被称为递归成员，使该查询称为递归成员的是对CTE名称的递归引用是触发</p>
<p>首先定点成员 ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select Id,Pid,DeptName,0 as lvl from Department where Id = 2</span><br></pre></td></tr></table></figure></p>
<p>查询出来的结果集为ID=2的一条数据<br>接下来此条数据作为第二个查询的基础 也就是cte<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select d.Id,d.Pid,d.DeptName,lvl+1 from cte c inner join   Department d on c.Id = d.Pid</span><br></pre></td></tr></table></figure></p>
<p>此时查出的结果集为 id为2的这一条数据和Department表作连接</p>
<table>
<thead>
<tr>
<th style="text-align:center">Id</th>
<th style="text-align:center">Pid</th>
<th style="text-align:center">DeptName</th>
<th>lvl</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
<td style="text-align:center">研发部</td>
<td>0</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">2</td>
<td style="text-align:center">小组1</td>
<td>1</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">2</td>
<td style="text-align:center">小组2</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>同理 将得到的记录（上面的id=5和id=6的2条数据作为 cte，id为2的是条件，不是本次的结果）再作为基础，再与Department表作连接 得到</p>
<table>
<thead>
<tr>
<th style="text-align:center">Id</th>
<th style="text-align:center">Pid</th>
<th style="text-align:center">DeptName</th>
<th style="text-align:center">lvl</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
<td style="text-align:center">研发部</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">2</td>
<td style="text-align:center">小组1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">2</td>
<td style="text-align:center">小组2</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">5</td>
<td style="text-align:center">前端组</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">5</td>
<td style="text-align:center">美工</td>
<td style="text-align:center">2</td>
</tr>
</tbody>
</table>
<p>依此类推  最后一次讲上面id=9和id=10的记录作为cte ，再与Department表作连接  ， 此次的结果为空 ，递归结束。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/11/01/SQRT详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/SQRT详解/" itemprop="url">观察者模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-01T22:50:21+08:00">
                2018-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构和算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构和算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/11/01/设计模式概览/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/设计模式概览/" itemprop="url">设计模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-01T22:50:21+08:00">
                2018-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>设计模式 大致分为下面几类：<br>1    创建型模式<br>这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。<br>工厂模式（Factory Pattern）【没什么好说的】<br>抽象工厂模式（Abstract Factory Pattern）【工厂的工厂，通过抽象工厂获取指定的工厂，再由工厂创建对象】<br>单例模式（Singleton Pattern） <a href="https://tuweiwei.github.io/2018/11/01/%E5%8D%95%E4%BE%8B/">-&gt;单例模式</a><br>建造者模式（Builder Pattern）<br>原型模式（Prototype Pattern）</p>
<p>2    结构型模式<br>这些设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式。<br>适配器模式（Adapter Pattern）<br>桥接模式（Bridge Pattern）<br>过滤器模式（Filter、Criteria Pattern）<br>组合模式（Composite Pattern）<br>装饰器模式（Decorator Pattern）<br>外观模式（Facade Pattern）<br>享元模式（Flyweight Pattern）<br>代理模式（Proxy Pattern）</p>
<p>3    行为型模式<br>这些设计模式特别关注对象之间的通信。<br>责任链模式（Chain of Responsibility Pattern）<br>命令模式（Command Pattern）<br>解释器模式（Interpreter Pattern）<br>迭代器模式（Iterator Pattern）<br>中介者模式（Mediator Pattern）<br>备忘录模式（Memento Pattern）<br>观察者模式（Observer Pattern）<br>状态模式（State Pattern）<br>空对象模式（Null Object Pattern）<br>策略模式（Strategy Pattern）<br>模板模式（Template Pattern）<br>访问者模式（Visitor Pattern）</p>
<p>4    J2EE 模式<br>这些设计模式特别关注表示层。这些模式是由 Sun Java Center 鉴定的。<br>MVC 模式（MVC Pattern）<br>业务代表模式（Business Delegate Pattern）<br>组合实体模式（Composite Entity Pattern）<br>数据访问对象模式（Data Access Object Pattern）<br>前端控制器模式（Front Controller Pattern）<br>拦截过滤器模式（Intercepting Filter Pattern）<br>服务定位器模式（Service Locator Pattern）<br>传输对象模式（Transfer Object Pattern）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/11/01/单例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/单例/" itemprop="url">单例模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-01T22:50:21+08:00">
                2018-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.饿汉式<br>这种方式在类初始化的时候实例就创建好了，由于是静态的，只会创建一次，问题是，如果创建的这个对象不受控制，假如（别的静态方法导致类初始化）该对象一直都没有使用，那无疑是种浪费<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">	private static Singleton instance=new Singleton();</span><br><span class="line">	private Singleton()&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	public static Singleton getInstance()&#123;</span><br><span class="line">		return instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.synchronized方法<br>下面这种方式恐怕是每个人都能第一时间想到的实现方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">	private static Singleton instance;</span><br><span class="line">	private Singleton()&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	public static synchronized Singleton getInstance()&#123;</span><br><span class="line">		if(instance==null)&#123;</span><br><span class="line">			instance=new Singleton();</span><br><span class="line">		&#125;</span><br><span class="line">		return instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">由于在静态方法上加锁-类锁，效率不高</span><br></pre></td></tr></table></figure></p>
<p>3.使用 静态内部类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">	private Singleton()&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	private static class SingletonHolder&#123;</span><br><span class="line">		private static Singleton instance=new Singleton();</span><br><span class="line">	&#125;</span><br><span class="line">	public static Singleton getInstance()&#123;</span><br><span class="line">		return SingletonHolder.instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>利用classloder机制来保证初始化instance时只有一个线程，和饿汉式的区别是：饿汉式只要Singleton类被加载，那么instance就会被实例化，而这种方式是Singleton类被加载了，instance也不一定被初始化，只有通过调用getInstance()方法时才会显式装载SingletonHolder类，从而实例化instance，可以做到需要的时候创建实例</p>
<p>4.枚举<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line"></span><br><span class="line">	private enum MyEnumSingleton&#123;</span><br><span class="line">		singletonFactory;</span><br><span class="line">		private Singleton instance;</span><br><span class="line">//		枚举类的构造方法在类加载时被实例化</span><br><span class="line">		private MyEnumSingleton()&#123;</span><br><span class="line">			instance=new Singleton();</span><br><span class="line">		&#125;</span><br><span class="line">		public Singleton getInstance()&#123;</span><br><span class="line">			return instance;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	public static Singleton getInstance()&#123;</span><br><span class="line">		return MyEnumSingleton.singletonFactory.getInstance();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">更为简洁的写法</span><br><span class="line">public enum Singleton &#123;  </span><br><span class="line">    INSTANCE;  </span><br><span class="line">    public void method() &#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>枚举的本质就是 实例可数， 上面创建两个实例，一个singletonFactory， instance， 利用工厂模式来获取<br>这种方式不仅能避免多线程同步问题，而且还能防止反序列化重新创建新的对象</p>
<p>5.static 代码块 这个和静态变量一样，在使用类的时候就已经执行赋值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">	private static Singleton instance=null;</span><br><span class="line">	private Singleton()&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	static &#123;</span><br><span class="line">		instance=new Singleton();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public static Singleton getInstance()&#123;</span><br><span class="line">		return instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>6.双重检查<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Singleton &#123;</span><br><span class="line">	private volatile static Singleton instance=null;</span><br><span class="line">	private Singleton()&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public static Singleton getInstance()&#123;</span><br><span class="line">		if(instance==null)&#123;    ----------------------1</span><br><span class="line">			synchronized(Singleton.class)&#123;</span><br><span class="line">				if(instance==null)&#123;------------------2</span><br><span class="line">					instance=new Singleton();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>多线程时，如果都停留在1处， 可以想象没有2处的校验的话， 第二个线程等待第一个线程释放锁后，又实例化了一遍。<br><strong><em>“双重检查的问题是：并不能保证它会在单处理器或多处理器计算机上顺利运行。双重检查失败的问题并不归咎于 JVM 中的实现 bug，而是归咎于 Java 平台内存模型。内存模型允许所谓的“无序写入” 导致二次检查失败,此法也就行不通了”</em></strong></p>
<h5 id="关于java-内存模型的无序写入"><a href="#关于java-内存模型的无序写入" class="headerlink" title="关于java 内存模型的无序写入"></a>关于java 内存模型的无序写入</h5><p>对象的创建的过程：<br>1、给Singleton的实例分配内存空间。</p>
<p>2、调用Singleton的构造方法进行构造函数初始化</p>
<p>3、将instance对象指向分配的内存空间<br>  &nbsp;&nbsp;但是由JVM的乱序执行上面1、2、3的执行顺序2和3并不一定，可能是1、2、3也可能是1、3、2如果是1、2、3还好说并不会出现什么问题，但是如是执行的顺序是1、3、2那么就较麻烦了，因为在执行到3的时候对象已经是非null了（只是还没被初始值来初始化），所以其线程有可能取到被<strong><em>初始化到一半的对象</em></strong>，出现这中错误的原因是instance = new Singleton();并没有真正的执行完，就释放了锁。<br>那么如何解决这个问题？<br>   &nbsp;&nbsp;我们可以使用volatile来阻止程序的乱序执行，从而使双重检验锁在多线程下正确执行。<br>volatile关键字是什么作用：<br>第一：保证被volatile修饰的变量会保证对所有的线程的可见性，这里的“ 可见性 ”是指当一条线程修改了这个变量的值，新值对于其他的线程是可以立即得知的。<br>第二：使用volatile变量的语意是<strong><em>禁止指令重排序优化</em></strong>，普通的变量仅仅会保证该方法的执行过程中所有依赖赋值结果的地方都能获取到正确的结果，而不能保证变量赋值操作顺序与程序代码中的执行顺序一致。<br>但是我们在使用volatile的同时使我们的代码不能被编译器进行代码优化，<strong><em>他需要在本地代码中插入许多的内存屏障指令来保证处理器不发生乱序执行，导致我们的程序在执行的时候变慢</em></strong><br>不过我看网上倒是还有一种方法解决：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;    </span><br><span class="line">    private static Singleton singleton;</span><br><span class="line">    private Singleton() &#123;   </span><br><span class="line">    &#125;   </span><br><span class="line">    public static Singleton getInstance() &#123; </span><br><span class="line">        if (singleton == null) &#123;    </span><br><span class="line">            synchronized (Singleton.class) &#123;</span><br><span class="line">                Singleton temp = singleton;</span><br><span class="line">                if (temp == null) &#123;    </span><br><span class="line">                    singleton = new Singleton();  </span><br><span class="line">                &#125;   </span><br><span class="line">            &#125;   </span><br><span class="line">        &#125;   </span><br><span class="line">        return singleton;   </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>仔细发现并未解决问题， 所以该模式还是尽量别用了</p>
<p>//问题？<br>如果单例类由不同的类装载器装入，那便有可能存在多个单例类的实例。(利用下面的方式手动装载单例类)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">原理：</span><br><span class="line">setContextClassLoader(ClassLoader cl)用来获取和设置线程的上下文类加载器。</span><br><span class="line">如果没有通过 setContextClassLoader(ClassLoader cl)方法进行设置的话，线程将继承其父线程的上下文类加载器。如果没有父线程，Java 应用运行的初始线程的上下文类加载器是系统类加载器(appClassLoader)。</span><br><span class="line"></span><br><span class="line">打个比方，tomcat是多线程服务的，那么从当前线程所用的类加载器来加载这个单例类时，如果每个线程的类加载器都不同，就有可能创建这个单例类的多个实例，一般程序里不会设置setContextClassLoader(ClassLoader cl)， 此时共同调用同一个类加载器来加载单例类。</span><br><span class="line">private static Class getClass(String classname) throws ClassNotFoundException &#123;     </span><br><span class="line"></span><br><span class="line">//此段代码要生效，最好别用setContextClassLoader(ClassLoader 手动设置线程的上下文类加载器，要设置也要保持每个线程的一致性</span><br><span class="line">      ClassLoader classLoader = Thread.currentThread().getContextClassLoader();     </span><br><span class="line">      </span><br><span class="line">      if(classLoader == null)    </span><br><span class="line">      &#123;</span><br><span class="line">         classLoader = Singleton.class.getClassLoader();     </span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      return (classLoader.loadClass(classname));     </span><br><span class="line">   &#125;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.如果Singleton实现了java.io.Serializable接口，那么这个类的实例就可能被序列化和复原。如果序列化一个单例类的对象，接下来复原那个对象，那你就会有多个单例类的实例(提供一个复原的方法)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton implements java.io.Serializable &#123;     </span><br><span class="line">   public static Singleton instance = new Singleton();     </span><br><span class="line">   protected Singleton() &#123;     </span><br><span class="line">        </span><br><span class="line">   &#125;     </span><br><span class="line">   private Object readResolve() &#123;     </span><br><span class="line">        return instance;     </span><br><span class="line">   &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="附加synchronized说明"><a href="#附加synchronized说明" class="headerlink" title="附加synchronized说明"></a>附加synchronized说明</h3><p>synchronized四种用法</p>
<ol>
<li>修饰方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public synchronized void method()</span><br><span class="line">&#123;</span><br><span class="line">   // todo</span><br><span class="line">&#125;</span><br><span class="line">public void method()</span><br><span class="line">&#123;</span><br><span class="line">   synchronized(this) &#123;</span><br><span class="line">      // todo</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>两种写法效果一样，不过第二种可归为修饰代码块<br>synchronized不能被继承，即使子类覆盖了该方法，但未加synchronized修饰，仍认为是普通方法</p>
<ol start="2">
<li><p>修饰类</p>
</li>
<li><p>修饰代码块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">class MyThread implements Runnable &#123;</span><br><span class="line">	   private static int count;</span><br><span class="line">	   public MyThread() &#123;</span><br><span class="line">	      count = 0;</span><br><span class="line">	   &#125;</span><br><span class="line">	   public  void run() &#123;</span><br><span class="line">	      synchronized(this) &#123;</span><br><span class="line">	         for (int i = 0; i &lt; 5; i++) &#123;</span><br><span class="line">	            try &#123;	               System.out.println(Thread.currentThread().getName() + &quot;:&quot; + (count++));</span><br><span class="line">	               Thread.sleep(1000);</span><br><span class="line">	            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">	               e.printStackTrace();</span><br><span class="line">	            &#125;</span><br><span class="line">	         &#125;</span><br><span class="line">	      &#125;</span><br><span class="line">	   &#125;</span><br><span class="line"> </span><br><span class="line">	   public int getCount() &#123;</span><br><span class="line">	      return count;</span><br><span class="line">	   &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class DemoTest &#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">//示例1    交替执行  </span><br><span class="line">//		SyncThread s1 = new SyncThread();</span><br><span class="line">//		SyncThread s2 = new SyncThread();</span><br><span class="line">//		Thread t1 = new Thread(s1);</span><br><span class="line">//		Thread t2 = new Thread(s2);</span><br><span class="line">//示例2		t1先执行完  t2再继续执行  因为锁定的为同一对象 ，注意t1执行时 t2是可以执行非同步方法的</span><br><span class="line">		SyncThread s = new SyncThread();</span><br><span class="line">		Thread t1 = new Thread(s);</span><br><span class="line">		Thread t2 = new Thread(s);</span><br><span class="line">		</span><br><span class="line">		t1.start();</span><br><span class="line">		t2.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修饰静态方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class ClassName &#123;</span><br><span class="line">   public void method() &#123;</span><br><span class="line">      synchronized(ClassName.class) &#123;</span><br><span class="line">         // todo</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">这种和 修饰类一样，锁住的是这个类的所有对象</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/11/01/Sqrt/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/Sqrt/" itemprop="url">SQRT函数奥秘</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-01T22:50:21+08:00">
                2018-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构和算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构和算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/11/01/forxmlpath/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/forxmlpath/" itemprop="url">sql高级语法-for xml path</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-01T22:50:21+08:00">
                2018-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="for-xml-path"><a href="#for-xml-path" class="headerlink" title="for xml path"></a><strong>for xml path</strong></h1><p>over()函数</p>
<p>补充：平时写sql<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select a,b,c count(*) as &apos;countNum&apos; from table</span><br></pre></td></tr></table></figure></p>
<p>这样会报错<br>要么将abc也加入到 group by 子句里，<br>要么使用over函数</p>
<p>select a,b,c count(*) over(partition by a) as ‘countNum’ from table</p>
<p>a  b   count<br>1  1    2<br>1  sd   2<br>2  222  1<br>这样既显示了数量  又同时显示了记录  group by就不好搞了<br>row_number over()<br>rank over()<br>lead over()   lag over()</p>
<h2 id="for-xml-path-这个在sql-server中的作用主要是把行数据转列。在mysql中有group-concat"><a href="#for-xml-path-这个在sql-server中的作用主要是把行数据转列。在mysql中有group-concat" class="headerlink" title="for xml path :这个在sql server中的作用主要是把行数据转列。在mysql中有group_concat"></a>for xml path :这个在sql server中的作用主要是把行数据转列。在mysql中有group_concat</h2><p>比如：</p>
<table>
<thead>
<tr>
<th>stuid</th>
<th style="text-align:center">name</th>
<th style="text-align:right">hobby</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td style="text-align:center">tuwei</td>
<td style="text-align:right">爬山</td>
</tr>
<tr>
<td>2</td>
<td style="text-align:center">tuwei</td>
<td style="text-align:right">看书</td>
</tr>
<tr>
<td>3</td>
<td style="text-align:center">tuwei</td>
<td style="text-align:right">发呆</td>
</tr>
</tbody>
</table>
<p>现在要转换成一条记录：<br>stuid|name|hobby<br>—|:–:|—:<br>1|tuwei|爬山，看书，发呆</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> B.sName,<span class="keyword">LEFT</span>(StuList,<span class="keyword">LEN</span>(StuList)<span class="number">-1</span>) <span class="keyword">as</span> hobby <span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">    sName,</span><br><span class="line">    (<span class="keyword">SELECT</span> hobby+<span class="string">','</span> <span class="keyword">FROM</span> student </span><br><span class="line">      <span class="keyword">WHERE</span> sName=A.sName </span><br><span class="line">      <span class="keyword">FOR</span> <span class="keyword">XML</span> <span class="keyword">PATH</span>(<span class="string">''</span>)) <span class="keyword">AS</span> StuList</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">FROM</span> student A </span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> sName</span><br><span class="line">) B</span><br></pre></td></tr></table></figure>
<h2 id="PIVOT-和UNPIVOT-行列转换函数"><a href="#PIVOT-和UNPIVOT-行列转换函数" class="headerlink" title="PIVOT 和UNPIVOT: 行列转换函数"></a>PIVOT 和UNPIVOT: 行列转换函数</h2><table>
<thead>
<tr>
<th>stuid</th>
<th style="text-align:center">name</th>
<th style="text-align:right">subject</th>
<th>score</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td style="text-align:center">tuwei</td>
<td style="text-align:right">语文</td>
<td>3</td>
</tr>
<tr>
<td>2</td>
<td style="text-align:center">tuwei</td>
<td style="text-align:right">数学</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td style="text-align:center">tuwei</td>
<td style="text-align:right">英语</td>
<td>5</td>
</tr>
<tr>
<td>4</td>
<td style="text-align:center">zhang</td>
<td style="text-align:right">语文</td>
<td>35</td>
</tr>
<tr>
<td>5</td>
<td style="text-align:center">zhang</td>
<td style="text-align:right">数学</td>
<td>43</td>
</tr>
<tr>
<td>6</td>
<td style="text-align:center">zhang</td>
<td style="text-align:right">英语</td>
<td>54</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select * from stuScore as p </span><br><span class="line">Pivot</span><br><span class="line">(</span><br><span class="line">    sum(score) for</span><br><span class="line">    p.Subject IN([语文],[数学],[英语])</span><br><span class="line">) AS T</span><br></pre></td></tr></table></figure>
<p>行转列<br>stuid|name|语文|数学|英语<br>—|:–:|:—:|:—:|:—:<br>1|tuwei|3|4|5<br>2|zhang|35|43|54</p>
<p>列转行  转回上面的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select P.name, p.Subject, P.score</span><br><span class="line">from</span><br><span class="line">(</span><br><span class="line">    select * from stuScore2</span><br><span class="line">) T</span><br><span class="line">UNPIVOT</span><br><span class="line">(</span><br><span class="line">    Score FOR Subject IN</span><br><span class="line">    (语文，数学，英语)</span><br><span class="line">)p</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/11/01/动态规划/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/动态规划/" itemprop="url">动态规划</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-01T22:50:21+08:00">
                2018-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构和算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构和算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1 动态规划： 将原问题拆解为若干子问题， 同时保存子问题的答案e，使得每个子问题只求解一次，最终获得原问题的姐</p>
<p>通常我们解决的问题是一个递归问题时，就要考虑是否存在重叠子问题，如果存在，采用记忆化搜索（自顶向下,就是我们假设我们已经知道了子问题的解了）或者动态规划（自底向上）  来解决</p>
<p>例子： 斐波那契数列</p>
<p>最容易想到的递归 指数级复杂度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int fib(n)&#123;</span><br><span class="line">  if(n==0)&#123;</span><br><span class="line">    return 0</span><br><span class="line">  &#125;</span><br><span class="line">  if(n==1)&#123;</span><br><span class="line">    return 1</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  return fib(n-1) + fib(n-2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以发现对于求fib(5) 就要求fib(4)+fib(3) 对于fib(3) fib(4)会求一遍fib(3)  fib(3)自身也要求一遍，这就产生了重叠问题 那么为什么不可以在计算过程中将这些值记录下来，下次就可以直接返回，不用重新计算了</p>
<h2 id="采用记忆化方法-O（n）复杂度"><a href="#采用记忆化方法-O（n）复杂度" class="headerlink" title="采用记忆化方法  O（n）复杂度"></a>采用记忆化方法  O（n）复杂度</h2><p>初始化一个集合  n+1个 默认值都为-1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;int&gt; v(n+1,-1)</span><br><span class="line">int fib(n)&#123;</span><br><span class="line">  if(n==0)&#123;</span><br><span class="line">    return 0</span><br><span class="line">  &#125;</span><br><span class="line">  if(n==1)&#123;</span><br><span class="line">    return 1</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  if(v[n] == -1)</span><br><span class="line">      v[n] =  fib(n-1) + fib(n-2)</span><br><span class="line">  return v[n]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="采用自底向上的方式（从小问题开始求解-非递归）"><a href="#采用自底向上的方式（从小问题开始求解-非递归）" class="headerlink" title="采用自底向上的方式（从小问题开始求解 非递归）"></a>采用自底向上的方式（从小问题开始求解 非递归）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int fib(n)&#123;</span><br><span class="line">  vector&lt;int&gt; v(n+1,-1)</span><br><span class="line">  v[0] = 0</span><br><span class="line">  v[1] = 1</span><br><span class="line">  for(int i=2; i&lt;=n; i++)&#123;</span><br><span class="line">     v[i] = v[i-1]+v[i-2]</span><br><span class="line">  &#125;</span><br><span class="line">  reutrn v[n]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>有一个楼梯，共有N姐台阶，每一次，可以上一个，也可以上两个，问，爬上这个楼梯，共有多少不同的方法<br>类比于背包问题，如果我们第一次上一个，那么剩下n-1个台阶要走这个子问题 如果上2个 剩下n-2个台阶要走这个子问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int clime(n)&#123;</span><br><span class="line">   if(n==1)&#123;</span><br><span class="line">      return 1</span><br><span class="line">   &#125;</span><br><span class="line">   if(n==2)&#123;</span><br><span class="line">      return 2</span><br><span class="line">   &#125;</span><br><span class="line">   return clime(n-1) + clime(n-2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/11/01/观察者模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/观察者模式/" itemprop="url">观察者模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-01T22:50:21+08:00">
                2018-11-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>抽象被观察者角色：也就是一个抽象主题，它把所有对观察者对象的引用保存在一个集合中，每个主题都可以有任意数量的观察者。抽象主题提供一个接口，可以增加和删除观察者角色。一般用一个抽象类和接口来实现。</li>
<li>抽象观察者角色：为所有的具体观察者定义一个接口，在得到主题通知时更新自己。</li>
<li>具体被观察者角色：也就是一个具体的主题，在集体主题的内部状态改变时，所有登记过的观察者发出通知。</li>
<li>具体观察者角色：实现抽象观察者角色所需要的更新接口，一边使本身的状态与制图的状态相协调。</li>
</ol>
<p>以前一直把观察者模式 等同  与  发布/订阅模式，查资料发现还是有些细微的区别<br>观察者<br><img src="https://raw.githubusercontent.com/tuweiwei/StaticRaw/master/observer.png" alt="图片alt" title="&#39;图片title&#39;">、<br>发布/订阅<br><img src="https://raw.githubusercontent.com/tuweiwei/StaticRaw/master/publisher.png" alt="图片alt" title="&#39;图片title&#39;"></p>
<p>如果是这样看来 观察者模式的订阅者与发布者之间是存在依赖的，而发布/订阅模式则不会 ，基本上现在的模式都是采用发布订阅模式<br>典型的c# 的 deligate 和 event的设计就透漏着此种思想</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line">ISubscribe.cs</span><br><span class="line">namespace DesignPattern.SubscribePublish</span><br><span class="line">&#123;</span><br><span class="line">    //定义订阅事件</span><br><span class="line">    public delegate void SubscribeHandle(string str);</span><br><span class="line">    //定义订阅接口</span><br><span class="line">    public interface ISubscribe</span><br><span class="line">    &#123;</span><br><span class="line">        event SubscribeHandle SubscribeEvent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">IPublish</span><br><span class="line">namespace DesignPattern.SubscribePublish</span><br><span class="line">&#123;</span><br><span class="line">    //定义发布事件</span><br><span class="line">    public delegate void PublishHandle(string str);</span><br><span class="line">    //定义发布接口</span><br><span class="line">    public interface IPublish</span><br><span class="line">    &#123;</span><br><span class="line">        event PublishHandle PublishEvent; </span><br><span class="line"></span><br><span class="line">        void Notify(string str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">namespace DesignPattern.SubscribePublish</span><br><span class="line">&#123;</span><br><span class="line">    public class SubPubComponet : ISubscribe, IPublish</span><br><span class="line">    &#123;</span><br><span class="line">        private string _subName;</span><br><span class="line">        public SubPubComponet(string subName)</span><br><span class="line">        &#123;</span><br><span class="line">            this._subName = subName;</span><br><span class="line">            PublishEvent += new PublishHandle(Notify);</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        #region ISubscribe Members</span><br><span class="line">        event SubscribeHandle subscribeEvent;</span><br><span class="line">        event SubscribeHandle ISubscribe.SubscribeEvent</span><br><span class="line">        &#123;</span><br><span class="line">            add &#123; subscribeEvent += value; &#125;</span><br><span class="line">            remove &#123; subscribeEvent -= value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        #endregion </span><br><span class="line"></span><br><span class="line">        #region IPublish Members</span><br><span class="line">        event PublishHandle PublishEvent; </span><br><span class="line"></span><br><span class="line">        event PublishHandle IPublish.PublishEvent</span><br><span class="line">        &#123;</span><br><span class="line">            add &#123; PublishEvent += value; &#125;</span><br><span class="line">            remove &#123; PublishEvent -= value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        #endregion </span><br><span class="line"></span><br><span class="line">        public void Notify(string str)</span><br><span class="line">        &#123;</span><br><span class="line">            if (subscribeEvent != null)</span><br><span class="line">                subscribeEvent.Invoke(string.Format(&quot;消息来源&#123;0&#125;:消息内容:&#123;1&#125;&quot;, _subName, str));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">namespace DesignPattern.SubscribePublish</span><br><span class="line">&#123;</span><br><span class="line">    public class Subscriber</span><br><span class="line">    &#123;</span><br><span class="line">        private string _subscriberName; </span><br><span class="line"></span><br><span class="line">        public Subscriber(string subscriberName)</span><br><span class="line">        &#123;</span><br><span class="line">            this._subscriberName = subscriberName;</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        public ISubscribe AddSubscribe &#123; set &#123; value.SubscribeEvent += Show; &#125; &#125;</span><br><span class="line">        public ISubscribe RemoveSubscribe &#123; set &#123; value.SubscribeEvent -= Show; &#125; &#125; </span><br><span class="line"></span><br><span class="line">        private void Show(string str)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(string.Format(&quot;我是&#123;0&#125;，我收到订阅的消息是:&#123;1&#125;&quot;, _subscriberName, str));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">namespace DesignPattern.SubscribePublish</span><br><span class="line">&#123;</span><br><span class="line">    public class Publisher:IPublish</span><br><span class="line">    &#123;</span><br><span class="line">        private string _publisherName; </span><br><span class="line"></span><br><span class="line">        public Publisher(string publisherName)</span><br><span class="line">        &#123;</span><br><span class="line">            this._publisherName = publisherName;</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        private event PublishHandle PublishEvent;</span><br><span class="line">        event PublishHandle IPublish.PublishEvent</span><br><span class="line">        &#123;</span><br><span class="line">            add &#123; PublishEvent += value; &#125;</span><br><span class="line">            remove &#123; PublishEvent -= value; &#125;</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        public void Notify(string str)</span><br><span class="line">        &#123;</span><br><span class="line">            if (PublishEvent != null)</span><br><span class="line">                PublishEvent.Invoke(string.Format(&quot;我是&#123;0&#125;,我发布&#123;1&#125;消息&quot;, _publisherName, str));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#region DesignPattern.SubscribePublish</span><br><span class="line">//新建两个订阅器</span><br><span class="line">SubPubComponet subPubComponet1 = new SubPubComponet(&quot;订阅器1&quot;);</span><br><span class="line">SubPubComponet subPubComponet2 = new SubPubComponet(&quot;订阅器2&quot;);</span><br><span class="line">//新建两个发布者</span><br><span class="line">IPublish publisher1 = new Publisher(&quot;TJVictor1&quot;);</span><br><span class="line">IPublish publisher2 = new Publisher(&quot;TJVictor2&quot;);</span><br><span class="line">//与订阅器关联 这里注意event += 另外一个event写法，表示发布者事件触发将同时触发到两个订阅器里</span><br><span class="line">//发布者发布信息，触发自身的PublishEvent,由于+=另外一个event，所以触发订阅器的PublishEvent，由于在构造订阅器的时候通过PublishEvent += new PublishHandle(Notify)设置了触发函数Notity,所以调用此函数继续判断有没有注册了订阅者事件的，如有立即触发订阅者的处理程序</span><br><span class="line">publisher1.PublishEvent += subPubComponet1.PublishEvent;</span><br><span class="line">publisher1.PublishEvent += subPubComponet2.PublishEvent;</span><br><span class="line">publisher2.PublishEvent += subPubComponet2.PublishEvent;</span><br><span class="line">//新建两个订阅者</span><br><span class="line">Subscriber s1 = new Subscriber(&quot;订阅人1&quot;);</span><br><span class="line">Subscriber s2 = new Subscriber(&quot;订阅人2&quot;);</span><br><span class="line">//进行订阅</span><br><span class="line">s1.AddSubscribe = subPubComponet1;</span><br><span class="line">s1.AddSubscribe = subPubComponet2;</span><br><span class="line">s2.AddSubscribe = subPubComponet2;</span><br><span class="line">//发布者发布消息</span><br><span class="line">publisher1.Notify(&quot;博客1&quot;);</span><br><span class="line">publisher2.Notify(&quot;博客2&quot;);</span><br><span class="line">//发送结束符号</span><br><span class="line">Console.WriteLine(&quot;&quot;.PadRight(50,&apos;-&apos;));</span><br><span class="line">//s1取消对订阅器2的订阅</span><br><span class="line">s1.RemoveSubscribe = subPubComponet2;</span><br><span class="line">//发布者发布消息</span><br><span class="line">publisher1.Notify(&quot;博客1&quot;);</span><br><span class="line">publisher2.Notify(&quot;博客2&quot;);</span><br><span class="line">//发送结束符号</span><br><span class="line">Console.WriteLine(&quot;&quot;.PadRight(50, &apos;-&apos;));</span><br><span class="line">#endregion </span><br><span class="line"></span><br><span class="line">#region Console.ReadLine();</span><br><span class="line">Console.ReadLine();</span><br><span class="line">#endregion</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/10/28/test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/28/test/" itemprop="url">test</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-28T17:46:57+08:00">
                2018-10-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="tuweiwei.github.io/2018/10/28/Hexo+nexT 搭建自己的github博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog Of tuwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/28/Hexo+nexT 搭建自己的github博客/" itemprop="url">如何使用hexo+next搭建属于自己的github博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-28T17:27:38+08:00">
                2018-10-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>环境安装就省略了…总体步骤为：</p>
<blockquote>
<ul>
<li>搭建环境准备 （包括nodejs git gitHub账号配置）</li>
<li>安装hexo</li>
<li>配置hexo</li>
<li>联系Hexo 和 github page</li>
<li>怎样发布文章</li>
<li>主题配置（NXET）</li>
<li>插件sitemap 和feed 安装</li>
<li>添加404页面</li>
</ul>
</blockquote>
<p><strong> <code>只是创建repo时后缀为github.io</code></strong></p>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>建立一个项目文件夹，进入该目录，命令行输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<p>执行hexo -v查看结果，验证是否安装成功<br>接下来初始化项目操作 输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></p>
<p>执行完此条命令，会创建一个基于hexo的项目<br>执行  <code>npm install</code> 安装依赖</p>
<p>执行hexo g  hexo s 启动本地服务 如此本地服务站点搭建完成</p>
<h2 id="如何联系Hexo和github-page"><a href="#如何联系Hexo和github-page" class="headerlink" title="如何联系Hexo和github page"></a>如何<em>联系</em>Hexo和github page</h2><h3 id="配置个人信息"><a href="#配置个人信息" class="headerlink" title="配置个人信息"></a>配置个人信息</h3><ol>
<li>在项目文件夹下执行git init</li>
<li>执行git remote add origin yougithub repo地址</li>
</ol>
<h3 id="配置-Deployment"><a href="#配置-Deployment" class="headerlink" title="配置 Deployment"></a>配置 Deployment</h3><p>在项目的根目录下的_config.yml 找到Deploy 修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:yourname/yourname.github.io.git</span><br><span class="line">  branch : master</span><br></pre></td></tr></table></figure></p>
<h3 id="接下来就可以写文章发布了"><a href="#接下来就可以写文章发布了" class="headerlink" title="接下来就可以写文章发布了"></a>接下来就可以写文章发布了</h3><p>命令：<br><code>hexo new post &quot;article-name&quot;</code><br>此时会在你的source目录下生成一个.md的文件<br>用markdown编辑保存后，执行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d  //部署到github服务器上</span><br></pre></td></tr></table></figure></p>
<p>访问你的地址 <a href="https://yourName.github.io就可以看到了" target="_blank" rel="noopener">https://yourName.github.io就可以看到了</a></p>
<h2 id="注意需要安装一个扩展-npm-install-hexo-deployer-git-save"><a href="#注意需要安装一个扩展-npm-install-hexo-deployer-git-save" class="headerlink" title="注意需要安装一个扩展 npm install hexo-deployer-git --save"></a><code>注意需要安装一个扩展 npm install hexo-deployer-git --save</code></h2><h1 id="补充git"><a href="#补充git" class="headerlink" title="补充git"></a>补充git</h1><p>在管理Git项目上，很多时候都是直接使用https url克隆到本地，当然也有有些人使用SSH url克隆到本地。</p>
<p>这两种方式的主要区别在于：使用https url克隆对初学者来说会比较方便，复制https url然后到git Bash里面直接用clone命令克隆到本地就好了，但是每次fetch和push代码都需要输入账号和密码，这也是https方式的麻烦之处。</p>
<p>而使用SSH url克隆却需要在克隆之前先配置和添加好SSH key，因此，如果你想要使用SSH url克隆的话，你必须是这个项目的拥有者。否则你是无法添加SSH key的，另外ssh默认是每次fetch和push代码都不需要输入账号和密码，如果你想要每次都输入账号密码才能进行fetch和push也可以另外进行设置。前面的几篇介绍Git的博客里面采用的都是https的方式作为案例</p>
<p>1、设置Git的user name和email：(如果是第一次的话)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 这里的“xujun&quot; 可以替换成自己的用户名</span><br><span class="line">git config --global user.name &quot;xujun&quot;</span><br><span class="line"># 这里的邮箱 gdutxiaoxu@163.com  替换成自己的邮箱</span><br><span class="line">git config --global user.email  &quot;gdutxiaoxu@163.com&quot;</span><br></pre></td></tr></table></figure></p>
<p>2、检查是否已经有SSH Key 没有生成。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 这里的邮箱 gdutxiaoxu@163.com  替换成自己的邮箱</span><br><span class="line">ssh-keygen -t rsa -C &quot;gdutxiaoxu@163.com&quot;</span><br></pre></td></tr></table></figure></p>
<p>默认的存储路径是：<br><code>C:\Users\Administrator\.ssh</code><br>3、添加密钥到ssh-agent<br>确保 ssh-agent 是可用的。ssh-agent是一种控制用来保存公钥身份验证所使用的私钥的程序，其实ssh-agent就是一个密钥管理器，运行ssh-agent以后，使用ssh-add将私钥交给ssh-agent保管，其他程序需要身份验证的时候可以将验证申请交给ssh-agent来完成整个认证过程<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># start the ssh-agent in the background</span><br><span class="line">eval &quot;$(ssh-agent -s)&quot;</span><br></pre></td></tr></table></figure></p>
<p>添加生成的 SSH key 到 ssh-agent。<br><code>ssh-add ~/.ssh/id_rsa</code></p>
<p>4、登陆Github, 添加 刚才本地生成的（id_rsa.pub）ssh<br>5、测试：<br><code>ssh -T git@github.com</code></p>
<p><a href="https:www.baidu.com" target="_blank" rel="noopener">百度</a><br><img src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3138365389,851751545&amp;fm=27&amp;gp=0.jpg" alt="描述"><br>[TOC]</p>
<p>作者 [@tuwei]<br>2017 年 09月 27日  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">tuwei</p>
              <p class="site-description motion-element" itemprop="description">blogs</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yourname" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://plus.google.com/yourname" target="_blank" title="Google">
                      
                        <i class="fa fa-fw fa-google"></i>Google</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.v2ex.com" title="V2EX" target="_blank">V2EX</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.36zhen.com" title="前端书籍资料" target="_blank">前端书籍资料</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tuwei</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v="></script>

  <script type="text/javascript" src="/js/src/motion.js?v="></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v="></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v="></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v="></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
